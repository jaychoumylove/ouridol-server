(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-task"],{"221c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("cbb7")),n=s(i("f372"));function s(t){return t&&t.__esModule?t:{default:t}}var o={components:{btnComponent:a.default,modalComponent:n.default},data:function(){return{requestCount:1,taskList:this.$app.getData("taskList")||[],modal:"",shareText:"",weiboUrl:"",weibo_zhuanfa:{}}},onShow:function(){this.getTaskList()},onLoad:function(){this.getShareText()},onShareAppMessage:function(t){var e=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(e)},methods:{initVideoAd:function(){var t=this;wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-9fa8b9c723fc27be"}),this.videoAd.onClose(function(e){if(e&&e.isEnded||void 0===e)for(var i in t.taskList){var a=t.taskList[i];7==a.type&&(t.taskList[i].status=1)}else t.$app.toast("观看完视频才有奖励哦")}),this.videoAd.onError(function(e){for(var i in t.$app.toast("抱歉，暂无合适的广告"),console.error("视频广告播放错误",e),t.taskList){var a=t.taskList[i];7==a.type&&(t.taskList[i].status=1)}}))},openAdver:function(){var t=this;this.videoAd||this.initVideoAd(),this.videoAd?this.videoAd.show().catch(function(e){t.videoAd.load().then(function(){t.videoAd.show().catch(function(e){t.$app.toast("视频广告打开失败")})})}):this.$app.toast("视频广告打开失败")},clipboard:function(){var t=this;uni.setClipboardData({data:this.shareText,success:function(){t.$app.toast("复制成功","success")}})},weiboCommit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.weiboUrl&&this.$app.request(this.$app.API.TASK_WEIBO,{weiboUrl:this.weiboUrl,type:e},function(e){t.$app.toast("提交成功","success"),t.modal="",t.weiboUrl="",t.getTaskList()})},doTask:function(t,e){var i=this;if(0==t.status){if(4==t.task_type.id&&~this.$app.getData("sysInfo").system.indexOf("iOS"))return;7==t.task_type.id?this.openAdver():8==t.task_type.id?this.modal="weibo":12==t.task_type.id?this.$app.request(this.$app.API.SHARE_STARMASS,{},function(t){}):14==t.task_type.id?this.modal="weibo_zhuanfa":t.task_type.gopage&&this.$app.goPage(t.task_type.gopage)}else 1==t.status&&(this.taskList[e].status=2,this.$app.request(this.$app.API.TASK_SETTLE,{task_id:t.id},function(t){var e="领取成功";t.data.coin&&(e+="，能量+"+t.data.coin),t.data.stone&&(e+="，灵丹+"+t.data.stone),t.data.trumpet&&(e+="，喇叭+"+t.data.trumpet),i.$app.toast(e),i.getTaskList(),i.$app.request(i.$app.API.USER_CURRENCY,{},function(t){i.$app.setData("userCurrency",t.data)})},"POST",!0))},getShareText:function(){var t=this;this.$app.request(this.$app.API.EXT_SHARETEXT,{},function(e){t.shareText=e.data.share_text,t.weibo_zhuanfa=e.data.weibo_zhuanfa})},getTaskList:function(){var t=this;this.$app.request(this.$app.API.TASK,{},function(e){var i=[];t.$app.isTaskAllDone=!0;var a=!0,n=!1,s=void 0;try{for(var o,c=e.data[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var r=o.value;0==r.status&&(t.$app.isTaskAllDone=!1),i.push({id:r.id,coin:r.coin||0,stone:r.stone||0,trumpet:r.trumpet||0,status:r.status,name:r.name,doneTimes:r.doneTimes,times:r.times,type:r.type,desc:r.desc,task_type:{id:r.task_type.id,gopage:r.task_type.gopage,btn_text:r.task_type.btn_text,img:r.task_type.img}})}}catch(l){n=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw s}}t.taskList=i,t.$app.setData("taskList",t.taskList),t.$app.closeLoading(t)})}}};e.default=o},"25c1":function(t,e,i){var a=i("a8ea");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2bd44748",a,!0,{sourceMap:!1,shadowMode:!1})},"4fbc":function(t,e,i){"use strict";var a=i("25c1"),n=i.n(a);n.a},"5c6d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[t._l(t.taskList,function(e,a){return 4==e.type&&~t.$app.getData("sysInfo").system.indexOf("iOS")&&0==t.$app.getData("config").ios_switch?t._e():i("v-uni-view",{key:a,staticClass:"item"},[i("v-uni-view",{staticClass:"left-content"},[i("v-uni-image",{staticClass:"img",attrs:{src:e.task_type.img,mode:""}}),i("v-uni-view",{staticClass:"content "},[i("v-uni-view",{staticClass:"top text-overflow"},[t._v(t._s(e.name))]),e.desc?i("v-uni-view",{staticClass:"bottom"},[t._v(t._s(e.desc))]):e.times?i("v-uni-view",{staticClass:"bottom"},[t._v("已完成("+t._s(e.doneTimes)+"/"+t._s(e.times)+")")]):t._e()],1)],1),i("v-uni-view",{staticClass:"right-content"},[i("v-uni-view",{staticClass:"earn"},[e.coin?i("v-uni-view",{staticClass:"right-item"},[i("v-uni-image",{attrs:{src:"/static/image/user/b1.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"add-count"},[t._v("+"+t._s(e.coin))])],1):t._e(),e.stone?i("v-uni-view",{staticClass:"right-item"},[i("v-uni-image",{attrs:{src:"/static/image/user/b2.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"add-count"},[t._v("+"+t._s(e.stone))])],1):t._e(),e.trumpet?i("v-uni-view",{staticClass:"right-item"},[i("v-uni-image",{attrs:{src:"/static/image/user/b3.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"add-count"},[t._v("+"+t._s(e.trumpet))])],1):t._e()],1),i("v-uni-view",{staticClass:"btn",on:{click:function(i){i=t.$handleEvent(i),t.doTask(e,a)}}},[0==e.status?i("btnComponent",{attrs:{type:"default"}},[9==e.type?i("v-uni-button",{staticClass:"btn",attrs:{"open-type":"share"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v(t._s(e.task_type.btn_text))])],1):12==e.type?i("v-uni-button",{staticClass:"btn",attrs:{"open-type":"share","data-share":"2"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v(t._s(e.task_type.btn_text))])],1):4==e.type&&1==t.$app.getData("config").ios_switch&&~t.$app.getData("sysInfo").system.indexOf("iOS")||13==e.type?i("v-uni-button",{staticClass:"btn",attrs:{"open-type":"contact"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v(t._s(13==e.type?e.task_type.btn_text:'回复"1"'))])],1):i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v(t._s(e.task_type.btn_text))])],1):t._e(),1==e.status?i("btnComponent",{attrs:{type:"success"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v("可领取")])],1):t._e(),2==e.status?i("btnComponent",{attrs:{type:"disable"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"130upx",height:"65upx"}},[t._v("已完成")])],1):t._e()],1)],1)],1)}),"weibo"==t.modal?i("modalComponent",{attrs:{title:"提示"},on:{closeModal:function(e){e=t.$handleEvent(e),t.modal=""}}},[i("v-uni-view",{staticClass:"weibo-modal-container flex-set"},[i("v-uni-view",{staticClass:"line"},[t._v("第一步：复制微博格式")]),i("v-uni-view",{staticClass:"text-wrapper",on:{click:function(e){e=t.$handleEvent(e),t.clipboard(e)}}},[t._v(t._s(t.shareText)),i("v-uni-view",{staticClass:"text"},[t._v("点击复制")])],1),i("v-uni-view",{staticClass:"line"},[t._v("第二步：发布帖子，填写帖子链接")]),i("v-uni-input",{attrs:{type:"text",placeholder:"帖子链接"},on:{input:function(e){e=t.$handleEvent(e),t.weiboUrl=e.detail.value}}}),i("btnComponent",{attrs:{type:"default"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"160upx",height:"80upx"},on:{click:function(e){e=t.$handleEvent(e),t.weiboCommit(e)}}},[t._v("提交")])],1)],1)],1):t._e(),"weibo_zhuanfa"==t.modal?i("modalComponent",{attrs:{title:"提示"},on:{closeModal:function(e){e=t.$handleEvent(e),t.modal=""}}},[i("v-uni-view",{staticClass:"weibo-modal-container zhuanfa flex-set"},[i("v-uni-view",{staticClass:"line"},[t._v("第一步：进入"),i("v-uni-text",[t._v(t._s(t.weibo_zhuanfa.host))]),t._v("主页查看"),i("v-uni-text",[t._v(t._s(t.weibo_zhuanfa.text))])],1),i("v-uni-image",{attrs:{src:t.weibo_zhuanfa.img,mode:""}}),i("v-uni-view",{staticClass:"line"},[t._v("第二步：填写转发的微博链接")]),i("v-uni-input",{attrs:{type:"text",placeholder:"帖子链接"},on:{input:function(e){e=t.$handleEvent(e),t.weiboUrl=e.detail.value}}}),i("btnComponent",{attrs:{type:"default"}},[i("v-uni-view",{staticClass:"flex-set",staticStyle:{width:"160upx",height:"80upx"},on:{click:function(e){e=t.$handleEvent(e),t.weiboCommit(1)}}},[t._v("提交")])],1)],1)],1):t._e()],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"7f21":function(t,e,i){"use strict";i.r(e);var a=i("5c6d"),n=i("b149");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("4fbc");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"0ce37964",null);e["default"]=c.exports},a8ea:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".container .item[data-v-0ce37964]{margin:%?20?%;background-color:hsla(0,0%,100%,.3);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:%?20?% %?40?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:%?60?%;border-radius:%?60?%}.container .item .left-content[data-v-0ce37964]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.container .item .left-content .img[data-v-0ce37964]{width:%?80?%;height:%?80?%;-webkit-border-radius:50%;border-radius:50%}.container .item .left-content .content[data-v-0ce37964]{margin-left:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.container .item .left-content .content .top[data-v-0ce37964]{max-width:%?250?%}.container .item .left-content .content .bottom[data-v-0ce37964]{font-size:%?24?%;color:#888}.container .item .right-content[data-v-0ce37964]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.container .item .right-content .earn[data-v-0ce37964]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;margin-right:%?30?%;width:%?100?%}.container .item .right-content .earn .right-item[data-v-0ce37964]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.container .item .right-content .earn .right-item uni-image[data-v-0ce37964]{width:%?40?%}.container .item .right-content .btn[data-v-0ce37964]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.container .weibo-modal-container[data-v-0ce37964]{height:100%;padding:%?20?% %?40?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.container .weibo-modal-container .text-wrapper[data-v-0ce37964]{margin-bottom:%?20?%;width:100%;border:%?4?% solid red;padding:%?10?%;padding-bottom:%?40?%;position:relative}.container .weibo-modal-container .text-wrapper .text[data-v-0ce37964]{position:absolute;right:%?20?%;bottom:%?-20?%;background-color:#efccc8}.container .weibo-modal-container uni-input[data-v-0ce37964]{width:90%;background-color:#eee;-webkit-border-radius:%?60?%;border-radius:%?60?%;height:%?70?%;margin-top:%?20?%;margin-bottom:%?20?%;padding:0 %?20?%}.container .weibo-modal-container.zhuanfa uni-text[data-v-0ce37964]{font-weight:700}.container .weibo-modal-container.zhuanfa uni-image[data-v-0ce37964]{width:%?320?%;height:%?240?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;margin:%?10?%}",""])},b149:function(t,e,i){"use strict";i.r(e);var a=i("221c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a}}]);